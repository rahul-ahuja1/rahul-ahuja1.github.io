<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v8.5.2 <https://hydejack.com/>
--><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><title>Welcome | Rahul Ahuja</title><meta name="generator" content="Jekyll v3.8.6" /><meta property="og:title" content="Welcome" /><meta name="author" content="Rahul Ahuja" /><meta property="og:locale" content="en" /><meta name="description" content="test" /><meta property="og:description" content="test" /><link rel="canonical" href="https://rahul-ahuja1.github.io//happiness.html" /><meta property="og:url" content="https://rahul-ahuja1.github.io//happiness.html" /><meta property="og:site_name" content="Rahul Ahuja" /> <script type="application/ld+json"> {"@type":"WebPage","author":{"@type":"Person","name":"Rahul Ahuja"},"url":"https://rahul-ahuja1.github.io//happiness.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://rahul-ahuja1.github.io//assets/icons/logo.png"},"name":"Rahul Ahuja"},"headline":"Welcome","description":"test","@context":"https://schema.org"}</script><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Rahul Ahuja"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="application-name" content="Rahul Ahuja"><meta name="msapplication-config" content="/assets/ieconfig.xml"><meta name="theme-color" content="rgb(25,55,71)"><meta name="generator" content="Hydejack v8.5.2" /><link type="application/atom+xml" rel="alternate" href="https://rahul-ahuja1.github.io//feed.xml" title="Rahul Ahuja" /><link rel="alternate" href="https://rahul-ahuja1.github.io//happiness.html" hreflang="en"><link rel="shortcut icon" href="/assets/icons/favicon.png"><link rel="apple-touch-icon" href="/assets/icons/icon.png"><link rel="manifest" href="/assets/manifest.json"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="dns-prefetch" href="/" id="_baseURL"><link rel="dns-prefetch" href="/sw.js" id="_hrefSW"><link rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js" id="_hrefKatexJS"><link rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css" id="_hrefKatexCSS"><link rel="dns-prefetch" href="/assets/bower_components/katex/dist/contrib/copy-tex.min.js" id="_hrefKatexCopyJS"><link rel="dns-prefetch" href="/assets/bower_components/katex/dist/contrib/copy-tex.min.css" id="_hrefKatexCopyCSS"><link rel="dns-prefetch" href="/assets/img/swipe.svg" id="_hrefSwipeSVG"> <script> !function(e,t){"use strict";function n(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}e.loadJS=function(e,o){var r=t.createElement("script");r.src=e,o&&n(r,"load",o,{once:!0});var a=t.scripts[0];return a.parentNode.insertBefore(r,a),r},e._loaded=!1,e.loadJSDeferred=function(o,r){function a(){e._loaded=!0,r&&n(c,"load",r,{once:!0});var o=t.scripts[0];o.parentNode.insertBefore(c,o)}var c=t.createElement("script");return c.src=o,e._loaded?a():n(e,"load",a,{once:!0}),c},e.setRel=e.setRelStylesheet=function(e){function o(){this.rel="stylesheet"}n(t.getElementById(e),"load",o,{once:!0})}}(window,document); ; !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); ; !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); ; !function(w, d) { w._noPushState = false; w._noDrawer = false; }(window, document); </script> <!--[if gt IE 8]><!----><style> body{--code-font-family: Menlo,Monaco,Consolas,monospace;--font-weight: 400;--font-weight-bold: 700;--font-weight-heading: 400;--text-muted: #888;--gray-bg: rgba(0,0,0,0.025);--gray-text: #666;--menu-text: #bbb;--body-color: #333;--body-bg: #fff;--border-color: #ebebeb}.clearfix,.sidebar-social::after{content:"";display:table;clear:both}.color-transition,body,p,hr,.hr,table:not(.highlight) td,table:not(.highlight) th,.message{transition:background-color 1s ease, border-color 1s ease}.no-color-transition{transition:none !important}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-size:16px;line-height:1.75}body{color:var(--body-color);background-color:var(--body-bg);font-weight:var(--font-weight);overflow-y:scroll}a{text-decoration:none}.lead{margin-left:-1rem;margin-right:-1rem}.content img,.img,.content video,.video{max-width:100%}.content img.lead,.img.lead,.content video.lead,.video.lead{max-width:calc(100% + 2rem);width:calc(100% + 2rem)}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{font-weight:var(--font-weight-heading);margin:5rem 0 1rem}h1,.h1{font-size:2rem;line-height:1.3}h2,.h2{font-size:1.5rem;line-height:1.4}h3,.h3{font-size:1.17em;line-height:1.5}h4,h5,h6,.h4,.h5,.h6{font-size:1rem;margin-bottom:0.5rem}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.2em;margin-top:1.5rem;margin-bottom:1.5rem;padding:0 1rem}ul,ol,dl{margin-top:0;margin-bottom:1rem}ul,ol{padding-left:1.25rem}hr{position:relative;margin:3rem 0;border:0;border-top:1px solid var(--border-color)}.hr{border-bottom:1px solid var(--border-color);padding-bottom:1rem;margin-bottom:2rem}table:not(.highlight){border-collapse:collapse;margin-bottom:2rem;margin-left:-1rem}table:not(.highlight) td,table:not(.highlight) th{padding:.25rem .5rem;border:1px solid var(--border-color)}table:not(.highlight) td:first-child,table:not(.highlight) th:first-child{padding-left:1rem}table:not(.highlight) td:last-child,table:not(.highlight) th:last-child{padding-right:1rem}.page{margin-bottom:3em}.page li+li{margin-top:.25rem}.page>header{margin-bottom:2rem}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-0.5rem;margin-bottom:1rem;color:var(--text-muted)}.related-posts{padding-left:0;list-style:none;margin-bottom:2rem}.related-posts>li,.related-posts>li+li{margin-top:1rem}.message{margin-bottom:1rem;padding:1rem;color:var(--gray-text);background-color:var(--gray-bg);margin-left:-1rem;margin-right:-1rem}@media screen{body::before{content:'';width:.5rem;background:var(--border-color);position:fixed;left:0;top:0;bottom:0}}@media screen and (min-width: 64em){body::before{width:21rem}}@media screen and (min-width: 1666px){body::before{width:calc(50% - 28rem)}}@media screen and (min-width: 42em){html{font-size:17px}}@media screen and (min-width: 124em){html{font-size:18px}}.fade-in{animation-duration:500ms;animation-timing-function:ease;animation-name:fade-in;animation-fill-mode:forwards}@keyframes fade-in{from{transform:translateY(-3rem);opacity:0}50%{transform:translateY(-3rem);opacity:0}to{transform:translateY(0);opacity:1}}.fl{float:left}.fr{float:right}.mb4{margin-bottom:4rem}.mb6{margin-bottom:6rem}.mt0{margin-top:0}.mt2{margin-top:2rem}.mt3{margin-top:3rem}.mt4{margin-top:4rem}.pb0{padding-bottom:0}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}.sr-only{display:none}.border{border:1px solid var(--border-color)}hy-push-state a,.a{position:relative;padding-bottom:.15rem;border-bottom:1px solid}hy-push-state a.no-hover,.a.no-hover{border-bottom:none;padding-bottom:0}.content .img{overflow:hidden}.content .img img{margin:0;width:100%;height:100%;background-color:var(--gray-bg)}hy-drawer{width:100%;position:relative;overflow:hidden}@media screen and (min-width: 64em){hy-drawer{position:fixed;width:21rem;top:0;left:0;bottom:0;margin-left:0}hy-drawer.cover{position:relative;width:100%}}@media screen and (min-width: 1666px){hy-drawer{width:calc(50% - 28rem)}}.sidebar{position:relative;display:flex;justify-content:center;align-items:center;color:rgba(255,255,255,0.75);text-align:center;z-index:2;min-height:100vh}.sidebar a{color:#fff;border-bottom-color:rgba(255,255,255,0.2)}.sidebar-bg{position:absolute;top:0;left:calc(50% - 50vw);width:100vw;height:100%;background:#202020 center / cover}.sidebar-bg::after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0.05)}.sidebar-bg.sidebar-overlay::after{background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 50%, rgba(32,32,32,0) 100%)}.sidebar-sticky{position:relative;z-index:3;max-width:21rem;padding:1.5rem;contain:content}.sidebar-about .avatar{margin-bottom:1.5rem}.sidebar-about>h2{margin-top:0}.sidebar-nav>ul{list-style:none;padding-left:0}a.sidebar-nav-item{display:inline-block;font-weight:var(--font-weight-heading);line-height:1.75;padding:.25rem;border-bottom:1px solid rgba(255,255,255,0.2)}.sidebar-social>ul{display:inline-block;list-style:none;padding-left:0;margin-bottom:0}.sidebar-social>ul>li{float:left}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.4rem;width:3rem;height:4rem;padding:.5rem 0;line-height:3rem}.sidebar-social>ul li+li{margin-top:0}.fixed-common,.fixed-top,.fixed-bottom{position:fixed;left:0;width:100%;z-index:2}.fixed-top{top:0}.fixed-bottom{bottom:0}.navbar>.content{padding-top:0;padding-bottom:0;min-height:0;color:var(--menu-text)}.nav-btn-bar{margin:0 -1rem 0 -.875rem}.nav-btn{background:none;border:none;padding:1.75rem .875rem;color:var(--menu-text) !important;cursor:pointer}.animation-main{opacity:0;pointer-events:none}.content{position:relative;margin-left:auto;margin-right:auto;padding:6rem 1rem 12rem}@media screen{.content{padding-left:1.5rem;max-width:38rem;min-height:100vh}}@media screen and (min-width: 54em){.content{max-width:42rem}}@media screen and (min-width: 64em){.content{padding-left:1rem;margin-left:24rem;margin-right:3rem}}@media screen and (min-width: 88em){.content{margin-left:25rem;margin-right:4rem;max-width:48rem}}@media screen and (min-width: 1666px){.content{margin:auto}}.avatar{width:6.5rem;height:6.5rem;border-radius:100%;overflow:hidden}@media screen and (min-width: 88em){.avatar{width:7rem;height:7rem}}.content .avatar{float:right;margin-left:.5rem}html{font-family:Noto Sans,Helvetica,Arial,sans-serif}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6,.heading{font-family:Roboto Slab,Helvetica,Arial,sans-serif}</style><link rel="preload" as="style" href="/assets/css/hydejack-8.5.2.css" id="_stylePreload"><link rel="preload" as="style" href="/assets/icomoon/style.css" id="_iconsPreload"><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Roboto+Slab:400|Noto+Sans:400,400i,700,700i&display=swap" id="_fontsPreload"> <script>setRel('_stylePreload');setRel('_iconsPreload');/**/setRel('_fontsPreload');/**/</script> <noscript><link rel="stylesheet" href="/assets/css/hydejack-8.5.2.css"><link rel="stylesheet" href="/assets/icomoon/style.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:400|Noto+Sans:400,400i,700,700i&display=swap"> </noscript><style id="_pageStyle"> .content a:not(.btn){color:#4fb1ba;border-color:rgba(79,177,186,0.2)}.content a:not(.btn):hover{border-color:#4fb1ba}:focus{outline-color:#4fb1ba !important}.btn-primary{color:#fff;background-color:#4fb1ba;border-color:#4fb1ba}.btn-primary:focus,.btn-primary.focus,.form-control:focus,.form-control.focus{box-shadow:0 0 0 3px rgba(79,177,186,0.5)}.btn-primary:hover,.btn-primary.hover{color:#fff;background-color:#409ba3;border-color:#409ba3}.btn-primary:disabled,.btn-primary.disabled{color:#fff;background-color:#4fb1ba;border-color:#4fb1ba}.btn-primary:active,.btn-primary.active{color:#fff;background-color:#409ba3;border-color:#409ba3}::selection{color:#fff;background:#4fb1ba}::-moz-selection{color:#fff;background:#4fb1ba}</style><!--<![endif]--><body class="no-color-transition"><div id="_navbar" class="navbar fixed-top"><div class="content"><div class="nav-btn-bar"> <span class="sr-only">Jump to:</span> <a id="_menu" class="nav-btn no-hover fl" href="#_navigation"> <span class="sr-only">Navigation</span> <span class="icon-menu"></span> </a></div></div></div><hr class="sr-only" hidden /> <hy-push-state replace-ids="_main" link-selector="a[href]:not([href*='/assets/']):not(.external):not(.no-push-state)" duration="250" script-selector="script:not([type^='math/tex'])" prefetch ><main id="_main" class="content fade-in layout-page" role="main" data-color="rgb(79,177,186)" data-theme-color="rgb(25,55,71)" data-image="/assets/img/sidebar-bg.png" data-overlay ><article class="page" role="article"><header><h1 class="page-title">Welcome</h1><div class="hr pb0"></div></header><p>I will be going through <a href="https://www.kaggle.com/unsdsn/world-happiness">this dataset</a> found on kaggle, that will be modified for only the years 2015 to 2017.<p>I will be cleaning the data, I will go into detail on correlation and the R and R^2 values, aswell as looking at the regression plots for all the columns.<h1 id="context">Context</h1><p>This dataset is obtained from Kaggle. I have modified the data to contain only data from 2015 to 2017. This report ranks 155 countries by their happiness level through 6 indicators:<ul><li>economic production<li>social support<li>life expectancy<li>freedom<li>absence of corruption<li>generosity</ul><p>The last indicator is dystopia residual. Dystopia residual is “the Dystopia Happiness Score(1.85) + the Residual value or the unexplained value for each country”. Dystopia is a made up country that has the world’s least happiest people. This made up country is high in corruption, low in average income, employment, etc. Dystopia residual is used as a benchmark and should be used side-by-side with the happiness score.<ul><li>Low dystopia residual = low level of happiness<li>high dystopia residual = high level of happiness</ul><h1 id="understanding-the-column-data">Understanding the column data</h1><ul><li>Country<li>Happiness rank<li>Happiness score</ul><p>This is obtained from a sample of population. The survey-taker asked the respondent to rate their happiness from 1 to 10.<ul><li>Economic (GDP per cap)<ul><li>Extend of GDP that contributes to the happiness score</ul><li>Family<ul><li>To what extend does family contribute to the happiness score</ul><li>Health<ul><li>Extend of health (life expectancy) contribute to the happiness score</ul><li>Freedom<ul><li>Extend of freedom that contribute to happiness. The freedom here represents the freedom of speech, freedom to pursue what we want, etc</ul><li>Trust (Government corruption)<ul><li>Extend of trust with regards to government corruption that contribute to happiness score</ul><li>Generosity<ul><li>Extend of generosity that contribute to happiness score</ul><li>dystopia residual<li>Year</ul><h2 id="do-note">Do note:</h2><h1 id="happinessscore--economicgdppercap--family--health--freedom--trust--generosity--dystopia-residual"><em>HappinessScore = Economic(GDPpercap) + Family + Health + Freedom + Trust + Generosity + Dystopia Residual</em></h1><h1 id="lets-get-started"><strong>Lets get started!</strong></h1><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Importing packages
</span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span> 

</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Importing dataset into colab
</span><span class="kn">from</span> <span class="nn">google.colab</span> <span class="kn">import</span> <span class="n">files</span> 
<span class="n">uploaded</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">upload</span><span class="p">()</span> <span class="c1">#import 2015, 2016, 2017 files
</span></code></pre></div></div><p><input type="file" id="files-f0bdfb6e-34f1-4748-8295-2efa5f34f3f6" name="files[]" multiple="" disabled="" /> <output id="result-f0bdfb6e-34f1-4748-8295-2efa5f34f3f6"> Upload widget is only available when the cell has been executed in the current browser session. Please rerun this cell to enable. </output> <script src="/nbextensions/google.colab/files.js"></script><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Saving World_Happiness_2017.csv to World_Happiness_2017.csv
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#reading in all three files
</span><span class="n">raw_2015</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'World_Happiness_2015.csv'</span><span class="p">)</span>
<span class="n">raw_2016</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'World_Happiness_2016.csv'</span><span class="p">)</span>
<span class="n">raw_2017</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'World_Happiness_2017.csv'</span><span class="p">)</span>

<span class="c1">#lets check each head
</span><span class="n">raw_2015</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#2015 head
</span></code></pre></div></div><div><style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; }</style><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th><th>Country<th>Region<th>Happiness Rank<th>Happiness Score<th>Standard Error<th>Economy (GDP per Capita)<th>Family<th>Health (Life Expectancy)<th>Freedom<th>Trust (Government Corruption)<th>Generosity<th>Dystopia Residual<tbody><tr><th>0<td>Switzerland<td>Western Europe<td>1<td>7.587<td>0.03411<td>1.39651<td>1.34951<td>0.94143<td>0.66557<td>0.41978<td>0.29678<td>2.51738<tr><th>1<td>Iceland<td>Western Europe<td>2<td>7.561<td>0.04884<td>1.30232<td>1.40223<td>0.94784<td>0.62877<td>0.14145<td>0.43630<td>2.70201</table></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">raw_2016</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#2016 head
</span></code></pre></div></div><div><style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; }</style><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th><th>Country<th>Region<th>Happiness Rank<th>Happiness Score<th>Lower Confidence Interval<th>Upper Confidence Interval<th>Economy (GDP per Capita)<th>Family<th>Health (Life Expectancy)<th>Freedom<th>Trust (Government Corruption)<th>Generosity<th>Dystopia Residual<tbody><tr><th>0<td>Denmark<td>Western Europe<td>1<td>7.526<td>7.460<td>7.592<td>1.44178<td>1.16374<td>0.79504<td>0.57941<td>0.44453<td>0.36171<td>2.73939<tr><th>1<td>Switzerland<td>Western Europe<td>2<td>7.509<td>7.428<td>7.590<td>1.52733<td>1.14524<td>0.86303<td>0.58557<td>0.41203<td>0.28083<td>2.69463</table></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">raw_2017</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#2017 head
</span></code></pre></div></div><div><style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; }</style><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th><th>Country<th>Happiness.Rank<th>Happiness.Score<th>Whisker.high<th>Whisker.low<th>Economy..GDP.per.Capita.<th>Family<th>Health..Life.Expectancy.<th>Freedom<th>Generosity<th>Trust..Government.Corruption.<th>Dystopia.Residual<tbody><tr><th>0<td>Norway<td>1<td>7.537<td>7.594445<td>7.479556<td>1.616463<td>1.533524<td>0.796667<td>0.635423<td>0.362012<td>0.315964<td>2.277027<tr><th>1<td>Denmark<td>2<td>7.522<td>7.581728<td>7.462272<td>1.482383<td>1.551122<td>0.792566<td>0.626007<td>0.355280<td>0.400770<td>2.313707</table></div><h1 id="things-we-need-to-fix-with-the-data">Things we need to fix with the data</h1><ul><li>2017 has different header names.<li>2015 and 2016 have a region attached, giving it one extra column.</ul><p>There will be other things to check, but I want to fix these first.<h2 id="fixing-2015-and-2016-columns">Fixing 2015 and 2016 columns</h2><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">raw_2015</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">correct_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Country'</span><span class="p">,</span> <span class="s">'Happiness Rank'</span><span class="p">,</span> <span class="s">'Happiness Score'</span><span class="p">,</span> <span class="s">'Economy (GDP per Capita)'</span><span class="p">,</span> <span class="s">'Family'</span><span class="p">,</span> <span class="s">'Health (Life Expectancy)'</span><span class="p">,</span> <span class="s">'Freedom'</span><span class="p">,</span> <span class="s">'Trust (Government Corruption)'</span><span class="p">,</span> <span class="s">'Generosity'</span><span class="p">,</span> <span class="s">'Dystopia Residual'</span><span class="p">]</span>
<span class="n">raw_2015</span> <span class="o">=</span> <span class="n">raw_2015</span><span class="p">[</span><span class="n">correct_columns</span><span class="p">]</span>
<span class="n">raw_2016</span> <span class="o">=</span> <span class="n">raw_2016</span><span class="p">[</span><span class="n">correct_columns</span><span class="p">]</span>
<span class="k">if</span> <span class="n">raw_2015</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span> <span class="o">==</span> <span class="n">raw_2016</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="nb">all</span><span class="p">():</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"unique columns are the same"</span><span class="p">)</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>unique columns are the same
</code></pre></div></div><h2 id="fixing-2017-data">Fixing 2017 data</h2><p>The trust and generosity columns were swapped in our data, so we can go ahead and swap them back to match our 2015 and 2016 set.<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#we need to change the the 2017 data to also look like the 2015 and 2016
#raw_2017.columns.unique()
</span><span class="n">temp_col</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Country'</span><span class="p">,</span> <span class="s">'Happiness.Rank'</span><span class="p">,</span> <span class="s">'Happiness.Score'</span><span class="p">,</span><span class="s">'Economy..GDP.per.Capita.'</span><span class="p">,</span> <span class="s">'Family'</span><span class="p">,</span> <span class="s">'Health..Life.Expectancy.'</span><span class="p">,</span> <span class="s">'Freedom'</span><span class="p">,</span> <span class="s">'Trust..Government.Corruption.'</span><span class="p">,</span> <span class="s">'Generosity'</span><span class="p">,</span> <span class="s">'Dystopia.Residual'</span><span class="p">]</span>
<span class="n">raw_2017</span> <span class="o">=</span> <span class="n">raw_2017</span><span class="p">[</span><span class="n">temp_col</span><span class="p">]</span> <span class="c1">#deleting two useless columns for us
</span>
<span class="n">raw_2017</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">raw_2015</span><span class="o">.</span><span class="n">columns</span>
<span class="n">raw_2017</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="k">if</span> <span class="n">raw_2015</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span> <span class="o">==</span> <span class="n">raw_2017</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="nb">all</span><span class="p">():</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"unique columns are the same"</span><span class="p">)</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>unique columns are the same
</code></pre></div></div><p>Awesome, now all of our years match, lets load this all into one dataset now, first we should add a year column, so we can use this later on.<h2 id="adding-year-columns-to-data">Adding Year columns to data</h2><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">raw_2015</span><span class="p">[</span><span class="s">'Year'</span><span class="p">]</span><span class="o">=</span><span class="mi">2015</span>
<span class="n">raw_2016</span><span class="p">[</span><span class="s">'Year'</span><span class="p">]</span><span class="o">=</span><span class="mi">2016</span>
<span class="n">raw_2017</span><span class="p">[</span><span class="s">'Year'</span><span class="p">]</span><span class="o">=</span><span class="mi">2017</span>
</code></pre></div></div><h2 id="joining-data-into-one-dataset">Joining data into one dataset</h2><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">join</span> <span class="o">=</span> <span class="p">[</span><span class="n">raw_2015</span><span class="p">,</span> <span class="n">raw_2016</span><span class="p">,</span> <span class="n">raw_2017</span><span class="p">]</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">join</span><span class="p">)</span>
<span class="c1"># Looking at total samples
</span><span class="n">data</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="c1">#everything looks right
</span></code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Country                          470
Happiness Rank                   470
Happiness Score                  470
Economy (GDP per Capita)         470
Family                           470
Health (Life Expectancy)         470
Freedom                          470
Trust (Government Corruption)    470
Generosity                       470
Dystopia Residual                470
Year                             470
dtype: int64
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Checking how many rows and columns we have
</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(470, 11)
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Checking the data types of our data
</span><span class="n">data</span><span class="o">.</span><span class="n">dtypes</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Country                           object
Happiness Rank                     int64
Happiness Score                  float64
Economy (GDP per Capita)         float64
Family                           float64
Health (Life Expectancy)         float64
Freedom                          float64
Trust (Government Corruption)    float64
Generosity                       float64
Dystopia Residual                float64
Year                               int64
dtype: object
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Checking data for null values
</span><span class="n">data</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Country                          0
Happiness Rank                   0
Happiness Score                  0
Economy (GDP per Capita)         0
Family                           0
Health (Life Expectancy)         0
Freedom                          0
Trust (Government Corruption)    0
Generosity                       0
Dystopia Residual                0
Year                             0
dtype: int64
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">factors</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Happiness Score'</span><span class="p">,</span><span class="s">'Economy (GDP per Capita)'</span><span class="p">,</span><span class="s">'Family'</span><span class="p">,</span><span class="s">'Health (Life Expectancy)'</span><span class="p">,</span><span class="s">'Freedom'</span><span class="p">,</span><span class="s">'Trust (Government Corruption)'</span><span class="p">,</span><span class="s">'Generosity'</span><span class="p">,</span><span class="s">'Dystopia Residual'</span><span class="p">]</span>
<span class="n">data_w_cols</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">factors</span><span class="p">]</span>
<span class="n">data_w_cols</span><span class="p">[</span><span class="n">data_w_cols</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="c1">#data_w_cols[data_w_cols &lt; 0].count() #unhide to check if and are below 0
</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Happiness Score                  0
Economy (GDP per Capita)         3
Family                           3
Health (Life Expectancy)         3
Freedom                          3
Trust (Government Corruption)    3
Generosity                       3
Dystopia Residual                0
dtype: int64
</code></pre></div></div><p>If you unhide the second count, we can see that all these values are strictly 0<p>We have 3 values in each that are set to 0, out of 470 samples, this wont throw off our values too much, although let me make sure they are not all the same row.<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data_w_cols</span><span class="p">[</span><span class="n">data_w_cols</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>8
</code></pre></div></div><p>out of 18 values that are set to 0, it comes from only 8 rows. This means they are spread out enough not to mess with our data too much. As we are unsure if these values were too low to count, or not entered correctly. Alternatively, we could also replace these with the value of our mean for the column.<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pandas.core.frame.DataFrame
</code></pre></div></div><h1 id="lets-take-a-look-at-some-scatter-plots">Lets take a look at some scatter plots</h1><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#pulling up a quick graph of plots for our data
</span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s">'FacetGrid plot'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span> <span class="mf">0.9</span><span class="p">)</span>
</code></pre></div></div><p><hy-img root-margin="512px" src="/project/storage/output_24_0.png" alt="png">  <noscript><img data-ignore src="/project/storage/output_24_0.png" alt="png"/></noscript>  <span slot="loading" class="loading"><span class="icon-cog"></span></span></hy-img><h1 id="taking-a-look-at-pearsons-r-value">Taking a look at Pearsons R value</h1><p>Next lets look at the correlation coefficient for our 7 factors.<p>Taking a look a these charts below, remember they are all “Happiness Score” vs the row name. This is why we get a r score of 1.0 when Happiness score is compared with itself.<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#excluding 3 factors here, Country, Happiness Rank, and Year
</span><span class="n">factors</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Happiness Score'</span><span class="p">,</span><span class="s">'Economy (GDP per Capita)'</span><span class="p">,</span><span class="s">'Family'</span><span class="p">,</span><span class="s">'Health (Life Expectancy)'</span><span class="p">,</span><span class="s">'Freedom'</span><span class="p">,</span><span class="s">'Trust (Government Corruption)'</span><span class="p">,</span><span class="s">'Generosity'</span><span class="p">,</span><span class="s">'Dystopia Residual'</span><span class="p">]</span>
<span class="n">corr_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">factors</span><span class="p">]</span>

<span class="c1">#applying pearsons correlation algorith
</span><span class="n">corr_data_all</span> <span class="o">=</span> <span class="n">corr_data</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>

<span class="c1">#grabbing the single row for Happiness Score vs (Row)
</span><span class="n">corr_data</span> <span class="o">=</span> <span class="n">corr_data_all</span><span class="p">[</span><span class="s">'Happiness Score'</span><span class="p">]</span>
<span class="n">corr_data</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Happiness Score                  1.000000
Economy (GDP per Capita)         0.785450
Family                           0.636532
Health (Life Expectancy)         0.748040
Freedom                          0.560353
Trust (Government Corruption)    0.406340
Generosity                       0.163562
Dystopia Residual                0.489747
Name: Happiness Score, dtype: float64
</code></pre></div></div><p>Now we can see all the correlation coefficients for the rows vs Happiness Score.<p>Lets take a look at these values squared<h2 id="pearsons-r2">Pearsons R^2</h2><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#squaring our correlation coefficient
</span><span class="n">corr_data_sq</span> <span class="o">=</span> <span class="n">corr_data</span> <span class="o">**</span><span class="mi">2</span>
<span class="n">corr_data_sq</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Happiness Score                  1.000000
Economy (GDP per Capita)         0.616931
Family                           0.405173
Health (Life Expectancy)         0.559564
Freedom                          0.313996
Trust (Government Corruption)    0.165112
Generosity                       0.026752
Dystopia Residual                0.239852
Name: Happiness Score, dtype: float64
</code></pre></div></div><p>Now here is our Pearson Correlation coefficient Squared for all of our factors<h2 id="heatmap-of-our-r2-values">Heatmap of our R^2 values</h2><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#putting whole data of the correlation coefficient squared into a heatmap
</span><span class="n">hm_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">factors</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span> <span class="o">**</span><span class="mi">2</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">triu</span><span class="p">(</span><span class="n">hm_data</span><span class="p">)</span>
<span class="n">hm</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">hm_data</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s">'coolwarm'</span><span class="p">,</span> <span class="n">vmin</span> <span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span><span class="p">,</span> <span class="n">center</span> <span class="o">=</span> <span class="mf">.3</span><span class="p">,</span> <span class="n">linewidths</span><span class="o">=</span><span class="mf">.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Peason Correlation squared for all factors'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div><p><hy-img root-margin="512px" src="/project/storage/output_30_0.png" alt="png">  <noscript><img data-ignore src="/project/storage/output_30_0.png" alt="png"/></noscript>  <span slot="loading" class="loading"><span class="icon-cog"></span></span></hy-img><p>What we can gather from this:<p>When comparing a rows correlation with our Happiness Score, we can gather what the relation between its Happiness Score and the row are, or how well fit our line will be. A score close to 1 tells us the linear regression line is a better fit, while a score closer to 0, means its a worse fit.<p>It also seems like our Economy vs Family score fits the regression model moderately well at 0.34, as well as Economy vs Health at 0.63!<p>First lets make this easier to see as percents.<h2 id="r2-as-percents">R^2 as percents</h2><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#convert our previous slice of the coefficients to percents
</span><span class="n">corr_percent</span> <span class="o">=</span> <span class="n">corr_data_sq</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">corr_percent</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Happiness Score                  100.000000
Economy (GDP per Capita)          61.693114
Family                            40.517294
Health (Life Expectancy)          55.956440
Freedom                           31.399592
Trust (Government Corruption)     16.511192
Generosity                         2.675240
Dystopia Residual                 23.985230
Name: Happiness Score, dtype: float64
</code></pre></div></div><p>So now we can see that 61.7% of the Happiness Score seems to be effected by the Economy, where as only 4.5% of our Happiness Score is effected by the Generosity.<p>In short, Generosity and Trust seem to have little to do with the Happiness Scores reported. While the three biggest facors seem to be peoples’ Economy, Family, and Health.<h1 id="building-scatterplots">Building scatterplots</h1><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># creating subsets of T/F tables for all our rows
</span><span class="n">yr_2015</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'Year'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2015</span>
<span class="n">yr_2016</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'Year'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2016</span>
<span class="n">yr_2017</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'Year'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2017</span>

<span class="c1"># renaming those subsets into new data variables
</span><span class="n">data_15</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">yr_2015</span><span class="p">]</span>
<span class="n">data_16</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">yr_2016</span><span class="p">]</span>
<span class="n">data_17</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">yr_2017</span><span class="p">]</span>

<span class="c1"># setting up for the loop
</span><span class="n">y_15</span> <span class="o">=</span> <span class="s">"Year 2015"</span>
<span class="n">y_16</span> <span class="o">=</span> <span class="s">"Year 2016"</span>
<span class="n">y_17</span> <span class="o">=</span> <span class="s">"Year 2017"</span>
<span class="n">y_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">y_15</span><span class="p">,</span> <span class="n">y_16</span><span class="p">,</span> <span class="n">y_17</span><span class="p">]</span>

<span class="c1">#setting up how many plots we have
</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">factors</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span>
<span class="n">row</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">col</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1">#setting sizes
</span><span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mi">7</span><span class="o">*</span><span class="n">col</span><span class="p">,</span> <span class="mf">4.7</span><span class="o">*</span><span class="n">row</span><span class="p">)</span>

<span class="c1">#calling each year seperately, to get the regplot to layer in different colors
</span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">factor</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">corr_data</span><span class="o">.</span><span class="n">index</span><span class="p">):</span> <span class="c1">#grabbing column name and index to cycle through
</span>  <span class="n">l</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">data_15</span><span class="p">[</span><span class="s">'Happiness Score'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span> <span class="n">data_15</span><span class="p">[</span><span class="n">factor</span><span class="p">],</span> <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">y_a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="o">//</span><span class="n">col</span><span class="p">][</span><span class="n">i</span><span class="o">%</span><span class="n">col</span><span class="p">])</span> <span class="c1">#cycle through 2015 data
</span>  <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">data_16</span><span class="p">[</span><span class="s">'Happiness Score'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span> <span class="n">data_16</span><span class="p">[</span><span class="n">factor</span><span class="p">],</span> <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">y_a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="o">//</span><span class="n">col</span><span class="p">][</span><span class="n">i</span><span class="o">%</span><span class="n">col</span><span class="p">])</span> <span class="c1">#layer ontop 2016 data
</span>  <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">data_17</span><span class="p">[</span><span class="s">'Happiness Score'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span> <span class="n">data_17</span><span class="p">[</span><span class="n">factor</span><span class="p">],</span> <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">y_a</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="o">//</span><span class="n">col</span><span class="p">][</span><span class="n">i</span><span class="o">%</span><span class="n">col</span><span class="p">])</span> <span class="c1">#layer ontop 2017 data
</span>  <span class="c1">#plot for regression line of total years
</span>  <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s">'Happiness Score'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">factor</span><span class="p">],</span> <span class="n">scatter</span><span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'black'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="o">//</span><span class="n">col</span><span class="p">][</span><span class="n">i</span><span class="o">%</span><span class="n">col</span><span class="p">])</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">"Correlation for Happiness Score vs {0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">factor</span><span class="p">))</span>
  <span class="c1">#print legend
</span>  <span class="k">if</span> <span class="p">(</span><span class="n">factor</span> <span class="o">!=</span> <span class="s">"Trust (Government Corruption)"</span> <span class="ow">and</span> <span class="n">factor</span> <span class="o">!=</span> <span class="s">"Generosity"</span><span class="p">):</span> 
    <span class="n">l</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">l</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div><p>As expected with our linear regression lines, there are good fits for the Economy, Family, and Health graphs, while theres a moderately good fit for the Dystopia and Freedom graphs, and a poor fit for the Generosity and Trust graphs.<p>With the color differences, we can see the Family scores tend to be lower in 2016 and the Dystopia Residual scores seem to be higher in 2016. While everything else tends to stay relatively the same throughout the 3 years.<h1 id="splitting-the-2016-data-out-of-our-scatter-plot">Splitting the 2016 data out of our scatter plot</h1><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#setting up how many plots we have
</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">#setting sizes
</span><span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">.5</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="s">"With 2016 Data vs No 2016 Data"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s">'bold'</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s">'center'</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s">'bottom'</span><span class="p">)</span>

<span class="c1">#grabbing a dataset of strictly year 2015 and year 2017
</span><span class="n">data_15_17</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">yr_2015</span> <span class="o">|</span> <span class="n">yr_2017</span><span class="p">]</span>

<span class="c1">#calling each year seperately, to get the regplot to layer in different colors
</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span> <span class="c1">#only two graphs
</span>  <span class="n">l</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">data_15</span><span class="p">[</span><span class="s">'Economy (GDP per Capita)'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span> <span class="n">data_15</span><span class="p">[</span><span class="s">"Family"</span><span class="p">],</span> <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">y_a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s">"blue"</span><span class="p">)</span> <span class="c1">#cycle through 2015 data
</span>  <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">data_16</span><span class="p">[</span><span class="s">'Economy (GDP per Capita)'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span> <span class="n">data_16</span><span class="p">[</span><span class="s">"Family"</span><span class="p">],</span> <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">y_a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s">"orange"</span><span class="p">)</span> <span class="c1">#layer ontop 2016 data
</span>    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s">'Economy (GDP per Capita)'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">"Family"</span><span class="p">],</span> <span class="n">scatter</span><span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'black'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">"Correlation for Economy (GDP per Capita) vs Family"</span><span class="p">)</span> <span class="c1">#plot for regression line of total years
</span>  <span class="k">else</span><span class="p">:</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span> <span class="n">data_15_17</span><span class="p">[</span><span class="s">'Economy (GDP per Capita)'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">data_15_17</span><span class="p">[</span><span class="s">'Family'</span><span class="p">],</span> <span class="n">scatter</span><span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'black'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">"Correlation Graph for Economy (GDP per Capita) vs Family"</span><span class="p">)</span> <span class="c1">#plot for regression line of total years
</span>  <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">data_17</span><span class="p">[</span><span class="s">'Economy (GDP per Capita)'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span> <span class="n">data_17</span><span class="p">[</span><span class="s">"Family"</span><span class="p">],</span> <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">y_a</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s">"green"</span><span class="p">)</span> <span class="c1">#layer ontop 2017 data
</span>  <span class="n">l</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="c1">#print legend
</span></code></pre></div></div><p><hy-img root-margin="512px" src="/project/storage/output_36_0.png" alt="png">  <noscript><img data-ignore src="/project/storage/output_36_0.png" alt="png"/></noscript>  <span slot="loading" class="loading"><span class="icon-cog"></span></span></hy-img><p>Taking a look at the 2016 data included graph for the Economy scores vs Family scores, we can see that our regression line fits moderately well, which was shown by our previous heatmap. We can also notice again, that our family scores tend to be lower, which we determined from our previous graphs.<p>Looking at the graph without the 2016 data, we can see a marginally better fit. Lets get a better look at these fits by finding the r squared values.<h2 id="evaluation-of-r2-values-for-family-vs-row">Evaluation of R^2 values for Family vs Row</h2><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#using data for strictly year 2015 and year 2017
</span><span class="n">data_15_17_corr</span> <span class="o">=</span> <span class="n">data_15_17</span><span class="p">[</span><span class="n">factors</span><span class="p">]</span>

<span class="c1">#getting the correlation coefficient, then squaring the numbers
</span><span class="n">data_15_17_corr</span> <span class="o">=</span> <span class="n">data_15_17_corr</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span> <span class="o">**</span><span class="mi">2</span>
<span class="n">data_15_17_corr</span><span class="p">[</span><span class="s">'Family'</span><span class="p">]</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Happiness Score                  0.490263
Economy (GDP per Capita)         0.457056
Family                           1.000000
Health (Life Expectancy)         0.227546
Freedom                          0.148295
Trust (Government Corruption)    0.029863
Generosity                       0.005934
Dystopia Residual                0.000589
Name: Family, dtype: float64
</code></pre></div></div><p>This chart is using the data without 2016, read as Family vs Row, this is why we have 1.0 in Family vs Family.<p>As we can see our squared correlation coefficients between Family and Economy jumped from 0.34 to 0.46, showing over a 10% increase in our data fitting better, after removing our 2016 data.<p>We can also notice our Family score vs Happiness score jumped from 0.46 to 0.49, a small increase without our 2016 data.<p>There was one more correlation that seemed to fit very well, from the heatmap earlier, Economy vs Health.<h1 id="checking-economy-vs-health-correlation">Checking Economy vs Health correlation</h1><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">l</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">data_15</span><span class="p">[</span><span class="s">'Economy (GDP per Capita)'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span> <span class="n">data_15</span><span class="p">[</span><span class="s">'Health (Life Expectancy)'</span><span class="p">],</span> <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">y_a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1">#cycle through 2015 data
</span><span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">data_16</span><span class="p">[</span><span class="s">'Economy (GDP per Capita)'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span> <span class="n">data_16</span><span class="p">[</span><span class="s">'Health (Life Expectancy)'</span><span class="p">],</span> <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">y_a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1">#layer ontop 2016 data
</span><span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">data_17</span><span class="p">[</span><span class="s">'Economy (GDP per Capita)'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span> <span class="n">data_17</span><span class="p">[</span><span class="s">'Health (Life Expectancy)'</span><span class="p">],</span> <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">y_a</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c1">#layer ontop 2017 data
#plot for regression line of total years
</span><span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s">'Economy (GDP per Capita)'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'Health (Life Expectancy)'</span><span class="p">],</span> <span class="n">scatter</span><span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'black'</span><span class="p">)</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">"Correlation for Economy (GDP per Capita) vs Health (Life Expectancy)"</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div></div><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.legend.Legend at 0x7fc15e25b7f0&gt;
</code></pre></div></div><p><hy-img root-margin="512px" src="/project/storage/output_40_1.png" alt="png">  <noscript><img data-ignore src="/project/storage/output_40_1.png" alt="png"/></noscript>  <span slot="loading" class="loading"><span class="icon-cog"></span></span></hy-img><p>The is graph of Economy vs Health has a heavy correlation of ~63%, the highest correlation out of all our categories.<p>#Summary In general we can hypothesize that the biggest factors for someones happiness may be their Economy(61%), Health(56%), and Family(40%). We can also assume that Freedom(31%) and the Dystopia Residual(24%) have moderate correlation, while Trust(17%) and Generosity(3%) typically have the lowest correlation.<p>We can also notice that, in general, people in 2016 had a lower score for Family, which showed, when removing the lower 2016 data, a 12% increase (34% to 46%) in a correlation between Family and Economy, and a 3% increase (46% to 49%) in Family vs Happiness. This is something that is expected, as Happiness is more heavily correlated with three factors: Economy(61%), Health(56%), and Family(40%). Meanwhile the Economy is only heavily correlated with two factors: Health(63%) and Family(34%). Meaning the family scores will have a heavier impact on the economy score, as opposed to the happiness score, even though its correlation percentage is lower.</article><footer role="contentinfo"><hr/><p><small class="copyright">Rahul Ahuja </small><p><small></small><hr class="sr-only"/></footer></main><hy-drawer class="" align="left" threshold="10" touch-events prevent-default ><header id="_sidebar" class="sidebar" role="banner"><div class="sidebar-bg sidebar-overlay" style="background-color:rgb(25,55,71);background-image:url(/assets/img/sidebar-bg.png)"></div><div class="sidebar-sticky"><div class="sidebar-about"> <a class="no-hover" href="/" tabindex="-1"> <img src="/assets/icons/logo.png" class="avatar" alt="Rahul Ahuja" data-ignore /> </a><h2 class="h1"><a href="/">Rahul Ahuja</a></h2><p class=""> Projects and Resume section do not belong to Rahul Ahuja.</div><nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span><ul><li> <a id="_navigation" href="/project/" class="sidebar-nav-item" > Projects </a><li> <a href="/about/" class="sidebar-nav-item" > Resume </a></ul></nav><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="mailto:emailahujarahul@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="https://github.com/rahul-ahuja1" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="https://www.linkedin.com/in/rahul-ahuja" title="LinkedIn" class="no-mark-external"> <span class="icon-linkedin2"></span> <span class="sr-only">LinkedIn</span> </a></ul></div></div></header></hy-drawer><hr class="sr-only" hidden /> </hy-push-state> <!--[if gt IE 10]><!----> <script nomodule>!function(){var e=document.createElement("script");if(!("noModule"in e)&&"onbeforeload"in e){var t=!1;document.addEventListener("beforeload",function(n){if(n.target===e)t=!0;else if(!n.target.hasAttribute("nomodule")||!t)return;n.preventDefault()},!0),e.type="module",e.src=".",document.head.appendChild(e),e.remove()}}(); </script> <script type="module" src="/assets/js/hydejack-8.5.2.js"></script> <script nomodule src="/assets/js/hydejack-legacy-8.5.2.js" defer></script> <!--<![endif]--><h2 class="sr-only" hidden>Templates (for web app):</h2><template id="_animation-template" hidden><div class="animation-main fixed-top"><div class="content"><div class="page"></div></div></div></template> <template id="_loading-template" hidden><div class="loading nav-btn fr"> <span class="sr-only">Loading…</span> <span class="icon-cog"></span></div></template> <template id="_error-template" hidden><div class="page"><h1 class="page-title">Error</h1><p class="lead"> Sorry, an error occurred while loading <a class="this-link" href=""></a>.</div></template> <template id="_forward-template" hidden> <button id="_forward" class="forward nav-btn no-hover fl"> <span class="sr-only">Forward</span> <span class="icon-arrow-right2"></span> </button> </template> <template id="_back-template" hidden> <button id="_back" class="back nav-btn no-hover fl"> <span class="sr-only">Back</span> <span class="icon-arrow-left2"></span> </button> </template> <template id="_permalink-template" hidden> <a href="#" class="permalink"> <span class="sr-only">Permalink</span> <span class="icon-link"></span> </a> </template></html>
